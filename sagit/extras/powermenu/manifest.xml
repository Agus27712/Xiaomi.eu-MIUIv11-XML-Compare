<?xml version="1.0" encoding="UTF-8"?>
<PowerMenu version="2" frameRate="60" resDensity="480" extraResources="sw720-den320::0.667,sw1536-den320::0.933,sw1440-den640::1.222" extraScales="sw720-den320:0.667,sw1536-den320:0.933,sw1440-den640:1.222" scaleByDensity="true">
    <ExternalCommands>
        <!-- Back key in main view -->
        <Trigger action="finish" condition="!(#reboot_dialog_flag||#shutdown_dialog_flag)**#back_flag">
            <VariableCommand name="back_flag" expression="0"/>
            <VariableCommand name="btn_flag" expression="0"/>
            <VariableCommand name="inout_flag" expression="0"/>
            <Command target="ani_timer_inout.animation" value="play"/>
            <Command target="ani_timer_labels_hide.animation" value="play"/>
            <ExternCommand command="dismiss" delay="600"/>
        </Trigger>
        <!-- Back key in dialog -->
        <Trigger action="finish" condition="(#reboot_dialog_flag||#shutdown_dialog_flag)**#back_flag">
            <VariableCommand name="back_flag" expression="0"/>
            <VariableCommand name="dialog_btn_flag" expression="0"/>
            <VariableCommand name="inout_flag" expression="1"/>
            <Command target="ani_timer_inout.animation" value="play"/>
            <Command target="ani_timer_labels_show.animation" value="play"/>
            <VariableCommand name="dialog_flag" expression="0"/>
            <Command target="ani_timer_dialog.animation" value="play"/>
            <Command target="ani_timer_extended.animation" value="play" condition="#show_extended"/>
        </Trigger>
    </ExternalCommands>
    <Var name="lx" expression="#view_width/2-190" const="true"/>
    <Var name="uy" expression="#view_height/2-260" const="true"/>
    <Var name="rx" expression="#view_width/2+190" const="true"/>
    <Var name="dy" expression="#view_height/2+180" const="true"/>
    <Var name="confirm_y" expression="#view_height/2" const="true"/>
    <Var name="confirm_label_y" expression="#confirm_y+272" const="true"/>
    <Var name="label_space" expression="169" const="true"/>
    <Var name="circle_r" expression="105" const="true"/>
    <Var name="pos_offset_x" expression="#lx+#circle_r+10" const="true"/>
    <Var name="pos_offset_y" expression="200" const="true"/>
    <Var name="big_circle_r" expression="148" const="true"/>
    <!-- 1: landscape, 0: portrait -->
    <Var name="orientation_flag" expression="#view_width}#view_height" const="true"/>
    <!-- 1: unlock back, 0: lock back -->
    <Var name="back_flag" expression="0" const="true"/>
    <!-- 1: fly in, 0: fly out -->
    <Var name="inout_flag" expression="1" const="true"/>
    <!-- 1: change, 0: don't change -->
    <Var name="change_inout_flag" expression="#orientation_flag**#show_extended**#reboot_dialog_flag"/>
    <!-- 1: enter dialog, 0: exit dialog -->
    <Var name="dialog_flag" expression="1" const="true"/>
    <!-- 1: showing dialog, 0: showing main view -->
    <Var name="reboot_dialog_flag" expression="0" const="true"/>
    <Var name="shutdown_dialog_flag" expression="0" const="true"/>
    <!-- 1: clickable, 0: unclickable -->
    <Var name="btn_flag" expression="1" const="true"/>
    <Var name="dialog_btn_flag" expression="0" const="true"/>
    <!-- remember which reboot option was clicked -->
    <Var name="fastboot_click_flag" expression="0" const="true"/>
    <Var name="reboot_click_flag" expression="0" const="true"/>
    <Var name="recovery_click_flag" expression="0" const="true"/>
    <!-- offset factor (0-1) for 4 buttons in main view -->
    <Var name="ani_factor_inout" expression="ifelse(#inout_flag,#ani_timer_inout*#ani_timer_inout*#ani_timer_inout,1-#ani_timer_inout*#ani_timer_inout*#ani_timer_inout)"/>
    <Var name="ani_timer_inout">
        <VariableAnimation loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="0" time="600"/>
            <Triggers>
                <Trigger action="end">
                    <VariableCommand name="back_flag" expression="1"/>
                </Trigger>
            </Triggers>
        </VariableAnimation>
    </Var>
    <!-- offset factor for labels show/hide animation -->
    <Var name="ani_factor_labels" expression="ifelse(#inout_flag,#ani_timer_labels_show,#ani_timer_labels_hide)"/>
    <Var name="ani_timer_labels_show">
        <VariableAnimation loop="false">
            <AniFrame value="0" time="0"/>
            <AniFrame value="1" dtime="200"/>
        </VariableAnimation>
    </Var>
    <Var name="ani_timer_labels_hide">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="1" time="200"/>
            <AniFrame value="0" dtime="200"/>
        </VariableAnimation>
    </Var>
    <!-- offset factor for reboot/shutdown button in dialog -->
    <Var name="ani_factor_dialog" expression="ifelse(#dialog_flag,#ani_timer_dialog*#ani_timer_dialog*#ani_timer_dialog,1-#ani_timer_dialog*#ani_timer_dialog*#ani_timer_dialog)"/>
    <Var name="ani_timer_dialog">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="0" time="600"/>
            <Triggers>
                <Trigger action="end" condition="!#dialog_flag">
                    <VariableCommand name="reboot_dialog_flag" expression="0"/>
                    <VariableCommand name="shutdown_dialog_flag" expression="0"/>
                    <VariableCommand name="btn_flag" expression="1"/>
                </Trigger>
            </Triggers>
        </VariableAnimation>
    </Var>
    <!-- offset factor for fastboot/recovery circle in alert dialog -->
    <Var name="ani_factor_extended" expression="ifelse(#orientation_flag,ifelse(#dialog_flag,#ani_timer_extended*#ani_timer_extended*#ani_timer_extended*(#view_width/4+200),#view_width/4+200-#ani_timer_extended*#ani_timer_extended*#ani_timer_extended*(#view_width/4+200)),ifelse(#dialog_flag,#ani_timer_extended*#ani_timer_extended*#ani_timer_extended*(#confirm_y-#big_circle_r-45),#confirm_y-#big_circle_r-45-#ani_timer_extended*#ani_timer_extended*#ani_timer_extended*(#confirm_y-#big_circle_r-45)))"/>
    <Var name="ani_timer_extended">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="0" time="600"/>
        </VariableAnimation>
    </Var>
    <!-- airplane/silent circle scale -->
    <Var name="ani_scale_flightmode">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="1.2" dtime="70"/>
            <AniFrame value="1" dtime="80"/>
            <AniFrame value="1.05" dtime="60"/>
            <AniFrame value="1" dtime="70"/>
            <AniFrame value="1.02" dtime="50"/>
            <AniFrame value="1" dtime="60"/>
        </VariableAnimation>
    </Var>
    <Var name="ani_scale_ringmode">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="1.2" dtime="70"/>
            <AniFrame value="1" dtime="80"/>
            <AniFrame value="1.05" dtime="60"/>
            <AniFrame value="1" dtime="70"/>
            <AniFrame value="1.02" dtime="50"/>
            <AniFrame value="1" dtime="60"/>
        </VariableAnimation>
    </Var>
    <!-- x offset on airplane mode -->
    <Var name="ani_fly_airplane">
        <VariableAnimation>
            <AniFrame value="0" time="0"/>
            <AniFrame value="-4" dtime="350"/>
            <AniFrame value="4" dtime="700"/>
            <AniFrame value="0" dtime="350"/>
        </VariableAnimation>
    </Var>
    <!-- y offset on flying out -->
    <Var name="ani_gone_airplane">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="0" time="300" acc="-2000"/>
            <AniFrame value="-200" dtime="500"/>
        </VariableAnimation>
    </Var>
    <!-- alpha on flying out -->
    <Var name="ani_alpha_airplane">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="255" time="0"/>
            <AniFrame value="255" time="300" acc="2000"/>
            <AniFrame value="0" dtime="500"/>
        </VariableAnimation>
    </Var>
    <Var name="ani_gone_dialogicon">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="1.2" time="275"/>
            <AniFrame value="0" time="500"/>
        </VariableAnimation>
    </Var>
    <Var name="ani_gone_dialogicon_noclick">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="0" time="275"/>
        </VariableAnimation>
    </Var>
    <Var name="ani_gone_dialogtext">
        <VariableAnimation initPause="true" loop="false">
            <AniFrame value="1" time="0"/>
            <AniFrame value="1.2" time="275"/>
            <AniFrame value="0" time="500"/>
        </VariableAnimation>
    </Var>
    <Button name="blank_area" w="#view_width" h="#view_height" contentDescriptionExp="@label_blank">
        <Triggers>
            <!-- Background tap in main view -->
            <Trigger action="up" condition="!(#reboot_dialog_flag||#shutdown_dialog_flag)**#back_flag">
                <VariableCommand name="back_flag" expression="0"/>
                <VariableCommand name="btn_flag" expression="0"/>
                <VariableCommand name="inout_flag" expression="0"/>
                <Command target="ani_timer_inout.animation" value="play"/>
                <Command target="ani_timer_labels_hide.animation" value="play"/>
                <ExternCommand command="dismiss" delay="600"/>
            </Trigger>
            <!-- Background tap in dialog -->
            <Trigger action="up" condition="(#reboot_dialog_flag||#shutdown_dialog_flag)**#back_flag">
                <VariableCommand name="back_flag" expression="0"/>
                <VariableCommand name="dialog_btn_flag" expression="0"/>
                <VariableCommand name="inout_flag" expression="1"/>
                <Command target="ani_timer_inout.animation" value="play"/>
                <Command target="ani_timer_labels_show.animation" value="play"/>
                <VariableCommand name="dialog_flag" expression="0"/>
                <Command target="ani_timer_dialog.animation" value="play"/>
                <Command target="ani_timer_extended.animation" value="play" condition="#show_extended"/>
            </Trigger>
        </Triggers>
    </Button>
    <!-- airplane mode -->
    <Group x="-#pos_offset_x*ifelse(#change_inout_flag,#ani_factor_inout/3.5,#ani_factor_inout)" y="-#pos_offset_y*ifelse(#change_inout_flag,#ani_factor_inout*2.75,#ani_factor_inout)">
        <Button x="#lx-#circle_r" y="#uy-#circle_r" w="#circle_r*2" h="#circle_r*2" contentDescriptionExp="@label_airplane_mode" interceptTouch="true">
            <Normal>
                <Circle x="#lx" y="#uy" r="#circle_r*#ani_scale_flightmode" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle x="#lx" y="#uy" r="#circle_r" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <!-- +0.1 to avoid hit the critical value of edge check which will occasionally cause drawing exceed the layer border -->
            <Group x="#lx-#circle_r" y="#uy-#circle_r" w="#circle_r*2+0.1" h="#circle_r*2+0.1" layered="true">
                <Image x="#circle_r+34" y="#circle_r-505" align="center" alignV="center" src="cloud.png" visibility="#airplane_mode" loadSync="true">
                    <PositionAnimation initPause="!#airplane_mode">
                        <Position x="0" y="0" time="0"/>
                        <Position x="0" y="596" time="1700"/>
                    </PositionAnimation>
                </Image>
                <Image x="#circle_r+#ani_fly_airplane*#airplane_mode" y="#circle_r+#ani_gone_airplane" alpha="#ani_alpha_airplane" align="center" alignV="center" src="airplane.png"/>
                <Image x="#circle_r" y="#circle_r" align="center" alignV="center" src="mask.png" xfermode="dst_in"/>
            </Group>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="btn_flag" expression="0"/>
                    <Command target="ani_scale_flightmode.animation" value="play"/>
                    <Command target="ani_gone_airplane.animation" value="play"/>
                    <Command target="ani_alpha_airplane.animation" value="play"/>
                    <VariableCommand name="inout_flag" expression="0" delay="800"/>
                    <Command target="ani_timer_inout.animation" value="play" delay="800"/>
                    <Command target="ani_timer_labels_hide.animation" value="play" delay="800"/>
                    <ExternCommand command="dismiss" delay="1400"/>
                    <ExternCommand command="airplane" delay="1400"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="airplane_label" x="#lx" y="#uy+#label_space" color="#99ffffff" size="48" align="center" alignV="center" pivotX="#airplane_label.text_width/2" pivotY="#airplane_label.text_height/2" scale="#ani_factor_labels" text="@label_airplane_mode"/>
    </Group>
    <!-- silent mode -->
    <Group x="#pos_offset_x*ifelse(#change_inout_flag,#ani_factor_inout/3.5,#ani_factor_inout)" y="-#pos_offset_y*ifelse(#change_inout_flag,#ani_factor_inout*2.75,#ani_factor_inout)">
        <Button x="#rx-#circle_r" y="#uy-#circle_r" w="#circle_r*2" h="#circle_r*2" contentDescriptionExp="@label_silent_mode" interceptTouch="true">
            <Normal>
                <Circle x="#rx" y="#uy" r="#circle_r*#ani_scale_ringmode" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle x="#rx" y="#uy" r="#circle_r" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="silent_img" x="#rx" y="#uy" align="center" alignV="center" pivotX="#silent_img.bmp_width/2" pivotY="#silent_img.bmp_height/2" srcExp="ifelse(#silent_mode,'silent.png','ring.png')" loadSync="true">
                <RotationAnimation delay="350" initPause="true" loop="false">
                    <Rotation angle="0" time="0"/>
                    <Rotation angle="-6" dtime="30"/>
                    <Rotation angle="6" dtime="60"/>
                    <Rotation angle="-12" dtime="70"/>
                    <Rotation angle="12" dtime="80"/>
                    <Rotation angle="-5" dtime="70"/>
                    <Rotation angle="5" dtime="60"/>
                    <Rotation angle="-2" dtime="60"/>
                    <Rotation angle="2" dtime="60"/>
                    <Rotation angle="0" dtime="30"/>
                </RotationAnimation>
            </Image>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="btn_flag" expression="0"/>
                    <ExternCommand command="silent"/>
                    <Command target="ani_scale_ringmode.animation" value="play"/>
                    <Command target="silent_img.animation" value="play"/>
                    <VariableCommand name="inout_flag" expression="0" delay="900"/>
                    <Command target="ani_timer_inout.animation" value="play" delay="900"/>
                    <Command target="ani_timer_labels_hide.animation" value="play" delay="900"/>
                    <ExternCommand command="dismiss" delay="1500"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="silent_label" x="#rx" y="#uy+#label_space" color="#99ffffff" size="48" align="center" alignV="center" pivotX="#silent_label.text_width/2" pivotY="#silent_label.text_height/2" scale="#ani_factor_labels" text="@label_silent_mode"/>
    </Group>
    <!-- reboot -->
    <Group x="-#pos_offset_x*#ani_factor_inout" y="#pos_offset_y*#ani_factor_inout" visibility="!#reboot_dialog.visibility">
        <Button x="#lx-#circle_r" y="#dy-#circle_r" w="#circle_r*2" h="#circle_r*2" contentDescriptionExp="@label_reboot" interceptTouch="true">
            <Normal>
                <Circle x="#lx" y="#dy" r="#circle_r" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle x="#lx" y="#dy" r="#circle_r" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="reboot_img" x="#lx" y="#dy" align="center" alignV="center" src="reboot.png" pivotX="#reboot_img.bmp_width/2" pivotY="#reboot_img.bmp_height/2" scale="0.7477"/>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="up,cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="btn_flag" expression="0"/>
                    <VariableCommand name="dialog_btn_flag" expression="1"/>
                    <VariableCommand name="reboot_dialog_flag" expression="1"/>
                    <VariableCommand name="inout_flag" expression="0"/>
                    <Command target="ani_timer_inout.animation" value="play"/>
                    <Command target="ani_timer_labels_hide.animation" value="play"/>
                    <VariableCommand name="dialog_flag" expression="1"/>
                    <Command target="ani_timer_dialog.animation" value="play"/>
                    <Command target="ani_timer_extended.animation" value="play" condition="#show_extended"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="reboot_label" x="#lx" y="#dy+#label_space" color="#99ffffff" size="48" align="center" alignV="center" pivotX="#reboot_label.text_width/2" pivotY="#reboot_label.text_height/2" scale="#ani_factor_labels" text="@label_reboot"/>
    </Group>
    <!-- shutdown -->
    <Group x="#pos_offset_x*ifelse(#change_inout_flag,#ani_factor_inout/3.5,#ani_factor_inout)" y="#pos_offset_y*ifelse(#change_inout_flag,#ani_factor_inout*2.75,#ani_factor_inout)" visibility="!#shutdown_dialog.visibility">
        <Button x="#rx-#circle_r" y="#dy-#circle_r" w="#circle_r*2" h="#circle_r*2" contentDescriptionExp="@label_shutdown" interceptTouch="true">
            <Normal>
                <Circle x="#rx" y="#dy" r="#circle_r" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle x="#rx" y="#dy" r="#circle_r" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="shutdown_img" x="#rx" y="#dy" align="center" alignV="center" src="shutdown.png" pivotX="#shutdown_img.bmp_width/2" pivotY="#shutdown_img.bmp_height/2" scale="0.7257"/>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="up,cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="btn_flag" expression="0"/>
                    <VariableCommand name="dialog_btn_flag" expression="1"/>
                    <VariableCommand name="shutdown_dialog_flag" expression="1"/>
                    <VariableCommand name="inout_flag" expression="0"/>
                    <Command target="ani_timer_inout.animation" value="play"/>
                    <Command target="ani_timer_labels_hide.animation" value="play"/>
                    <VariableCommand name="dialog_flag" expression="1"/>
                    <Command target="ani_timer_dialog.animation" value="play"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="shutdown_label" x="#rx" y="#dy+#label_space" color="#99ffffff" size="48" align="center" alignV="center" pivotX="#shutdown_label.text_width/2" pivotY="#shutdown_label.text_height/2" scale="#ani_factor_labels" text="@label_shutdown"/>
    </Group>
    <!-- reboot alert dialog -->
    <Group name="reboot_dialog" x="#view_width/2+(#lx-#view_width/2)*#ani_factor_dialog" visibility="#reboot_dialog_flag">
        <Button x="-#big_circle_r" y="#confirm_y-#big_circle_r+(#dy-#confirm_y)*#ani_factor_dialog" w="lt(#ani_factor_dialog,0.2)*#big_circle_r*2" h="#big_circle_r*2" contentDescriptionExp="@label_alert_reboot" interceptTouch="true">
            <Normal>
                <Circle y="#confirm_y+(#dy-#confirm_y)*#ani_factor_dialog" r="#big_circle_r*(1-0.29*#ani_factor_dialog)*ifelse(#reboot_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle y="#confirm_y+(#dy-#confirm_y)*#ani_factor_dialog" r="#big_circle_r*(1-0.29*#ani_factor_dialog)*ifelse(#reboot_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="reboot_dialog_img" y="#confirm_y+(#dy-#confirm_y)*#ani_factor_dialog" align="center" alignV="center" pivotX="#reboot_dialog_img.bmp_width/2" pivotY="#reboot_dialog_img.bmp_height/2" scale="(1-0.2523*#ani_factor_dialog)*ifelse(#reboot_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" src="reboot.png" loadSync="true"/>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="up,cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#dialog_btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="dialog_btn_flag" expression="0"/>
                    <VariableCommand name="reboot_click_flag" expression="1"/>
                    <Command target="ani_gone_dialogicon.animation" value="play"/>
                    <Command target="ani_gone_dialogicon_noclick.animation" value="play"/>
                    <Command target="ani_gone_dialogtext.animation" value="play" delay="100"/>
                    <ExternCommand command="reboot" delay="700"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="reboot_confirm_label" y="#confirm_label_y+(#dy+#label_space-#confirm_label_y)*#ani_factor_dialog-74*(1-#ani_factor_dialog)" color="#99ffffff" size="48" pivotX="#reboot_confirm_label.text_width/2" pivotY="#reboot_confirm_label.text_height/2" scale="ifelse(#reboot_click_flag,#ani_gone_dialogtext,#ani_gone_dialogicon_noclick)" align="center" alignV="center" textExp="ifelse(#dialog_flag**#reboot_dialog_flag,@label_alert_reboot,@label_reboot)"/>
    </Group>
    <Group x="ifelse(#orientation_flag,#view_width/4*3+#ani_factor_extended,#view_width/2)" y="ifelse(#orientation_flag,#view_height/2,#confirm_y+442+#ani_factor_extended)" visibility="#reboot_dialog_flag**#show_extended">
        <Button x="-#big_circle_r" y="-#big_circle_r" w="#big_circle_r*2" h="#big_circle_r*2" contentDescriptionExp="@label_alert_recovery" interceptTouch="true">
            <Normal>
                <Circle r="#big_circle_r*(1-0.29*#ani_factor_dialog)*ifelse(#recovery_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle r="#big_circle_r*(1-0.29*#ani_factor_dialog)*ifelse(#recovery_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="recovery_dialog_img" align="center" alignV="center" pivotX="#recovery_dialog_img.bmp_width/2" pivotY="#recovery_dialog_img.bmp_height/2" scale="(1-0.2523*#ani_factor_dialog)*ifelse(#recovery_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" src="recovery.png" loadSync="true"/>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="up,cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#dialog_btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="dialog_btn_flag" expression="0"/>
                    <VariableCommand name="recovery_click_flag" expression="1"/>
                    <Command target="ani_gone_dialogicon.animation" value="play"/>
                    <Command target="ani_gone_dialogicon_noclick.animation" value="play"/>
                    <Command target="ani_gone_dialogtext.animation" value="play" delay="100"/>
                    <ExternCommand command="recovery" delay="700"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="recovery_confirm_label" y="198" color="#99ffffff" size="48" pivotX="#recovery_confirm_label.text_width/2" pivotY="#recovery_confirm_label.text_height/2" scale="ifelse(#recovery_click_flag,#ani_gone_dialogtext,#ani_gone_dialogicon_noclick)" align="center" alignV="center" textExp="@label_alert_recovery"/>
    </Group>
    <Group x="ifelse(#orientation_flag,#view_width/4-#ani_factor_extended,#view_width/2)" y="ifelse(#orientation_flag,#view_height/2,#confirm_y-442-#ani_factor_extended)" visibility="#reboot_dialog_flag**#show_extended">
        <Button x="-#big_circle_r" y="-#big_circle_r" w="#big_circle_r*2" h="#big_circle_r*2" contentDescriptionExp="@label_alert_fastboot" interceptTouch="true">
            <Normal>
                <Circle r="#big_circle_r*(1-0.29*#ani_factor_dialog)*ifelse(#fastboot_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle r="#big_circle_r*(1-0.29*#ani_factor_dialog)*ifelse(#fastboot_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="fastboot_dialog_img" align="center" alignV="center" pivotX="#fastboot_dialog_img.bmp_width/2" pivotY="#fastboot_dialog_img.bmp_height/2" scale="(1-0.2523*#ani_factor_dialog)*ifelse(#fastboot_click_flag,#ani_gone_dialogicon,#ani_gone_dialogicon_noclick)" src="fastboot.png" loadSync="true"/>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="up,cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#dialog_btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="dialog_btn_flag" expression="0"/>
                    <VariableCommand name="fastboot_click_flag" expression="1"/>
                    <Command target="ani_gone_dialogicon.animation" value="play"/>
                    <Command target="ani_gone_dialogicon_noclick.animation" value="play"/>
                    <Command target="ani_gone_dialogtext.animation" value="play" delay="100"/>
                    <ExternCommand command="bootloader" delay="700"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="fastboot_confirm_label" y="198" color="#99ffffff" size="48" pivotX="#fastboot_confirm_label.text_width/2" pivotY="#fastboot_confirm_label.text_height/2" scale="ifelse(#fastboot_click_flag,#ani_gone_dialogtext,#ani_gone_dialogicon_noclick)" align="center" alignV="center" textExp="@label_alert_fastboot"/>
    </Group>
    <!-- shutdown alert dialog -->
    <Group name="shutdown_dialog" x="#view_width/2+(#rx-#view_width/2)*#ani_factor_dialog" visibility="#shutdown_dialog_flag">
        <Button x="-#big_circle_r" y="#confirm_y-#big_circle_r+(#dy-#confirm_y)*#ani_factor_dialog" w="lt(#ani_factor_dialog,0.2)*#big_circle_r*2" h="#big_circle_r*2" contentDescriptionExp="@label_alert_shutdown" interceptTouch="true">
            <Normal>
                <Circle y="#confirm_y+(#dy-#confirm_y)*#ani_factor_dialog" r="#big_circle_r*(1-0.29*#ani_factor_dialog)*#ani_gone_dialogicon" strokeColor="#4cffffff" fillColor="#00ffffff" weight="2" strokeAlign="inner"/>
            </Normal>
            <Pressed>
                <Circle y="#confirm_y+(#dy-#confirm_y)*#ani_factor_dialog" r="#big_circle_r*(1-0.29*#ani_factor_dialog)*#ani_gone_dialogicon" strokeColor="#4cffffff" fillColor="#16ffffff" weight="2" strokeAlign="inner"/>
            </Pressed>
            <Image name="shutdown_dialog_img" y="#confirm_y+(#dy-#confirm_y)*#ani_factor_dialog" align="center" alignV="center" pivotX="#shutdown_dialog_img.bmp_width/2" pivotY="#shutdown_dialog_img.bmp_height/2" scale="(1-0.2743*#ani_factor_dialog)*#ani_gone_dialogicon" src="shutdown.png" loadSync="true"/>
            <Triggers>
                <Trigger action="down">
                    <Command target="blank_area.visibility" value="false"/>
                </Trigger>
                <Trigger action="up,cancel">
                    <Command target="blank_area.visibility" value="true"/>
                </Trigger>
                <Trigger action="up" condition="#dialog_btn_flag">
                    <VariableCommand name="back_flag" expression="0"/>
                    <VariableCommand name="dialog_btn_flag" expression="0"/>
                    <Command target="ani_gone_dialogicon.animation" value="play"/>
                    <Command target="ani_gone_dialogtext.animation" value="play" delay="100"/>
                    <ExternCommand command="shutdown" delay="700"/>
                </Trigger>
            </Triggers>
        </Button>
        <Text name="shutdown_confirm_label" y="#confirm_label_y+(#dy+#label_space-#confirm_label_y)*#ani_factor_dialog-74*(1-#ani_factor_dialog)" color="#99ffffff" size="48" pivotX="#shutdown_confirm_label.text_width/2" pivotY="#shutdown_confirm_label.text_height/2" scale="#ani_gone_dialogtext" align="center" alignV="center" textExp="ifelse(#dialog_flag**#shutdown_dialog_flag,@label_alert_shutdown,@label_shutdown)"/>
    </Group>
    <Text name="shutdown_info_label" x="#view_width/2" y="#view_height-#shutdown_info_label.text_height-40*(1-#ani_factor_dialog)" w="#view_width-20" visibility="#shutdown_dialog_flag" multiLine="true" color="#80ffffff" size="42" alpha="255*(1-#ani_factor_dialog)" align="center" alignV="bottom" textExp="@shutdown_info"/>
</PowerMenu>
